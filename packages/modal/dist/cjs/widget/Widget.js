"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Widget",{enumerable:!0,get:function(){return n}});var e=require("@wepin/common");function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=/*#__PURE__*/function(){"use strict";var n,o;function s(t,n,o,r,a){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s),i(this,"id",void 0),i(this,"url",void 0),i(this,"type",void 0),i(this,"isHide",void 0),i(this,"isWidgetReady",!1),i(this,"EL",void 0),i(this,"_open",void 0),this.url=t,this.id="id-".concat((0,e.uuidv4)()),this.isHide=a,s._webview[this.id]=n,this.type=o,this.EL=r,window.addEventListener("message",this.EL),this._open=!0}return n=[{key:"isOpen",get:function(){return this._open}},{key:"close",value:function(){window.removeEventListener("message",this.EL),this._open=!1,this.isWidgetReady=!1,this._closeWebview()}},{key:"response",value:function(e){try{this._post(e)}catch(e){console.error("Can not response message to the webview",e)}}},{key:"request",value:function(e){try{this._post(e)}catch(e){console.error("Can not send message to the webview",e)}}}],o=[{key:"getWebview",value:function(e){return s._webview[e]}},{key:"clearWebview",value:function(e){delete s._webview[e]}},{key:"clearAllWebview",value:function(){this._webview={}}}],n&&t(s.prototype,n),o&&t(s,o),s}();i(n,"_webview",{});