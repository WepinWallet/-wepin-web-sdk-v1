"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(exports,{getSelectedAddress:function(){return a},setSelectedAddress:function(){return i}});var e,r,t=require("../const/cookieName.js"),n=require("./utils.js");function s(e,r,t,n,s,o,u){try{var a=e[o](u),i=a.value}catch(e){t(e);return}a.done?r(i):Promise.resolve(i).then(n,s)}function o(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var u=e.apply(r,t);function a(e){s(u,n,o,a,i,"next",e)}function i(e){s(u,n,o,a,i,"throw",e)}a(void 0)})}}function u(e,r){var t,n,s,o,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw TypeError("Generator is already executing.");for(;u;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(s=(s=u.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){u.label=o[1];break}if(6===o[0]&&u.label<s[1]){u.label=s[1],s=o;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(o);break}s[2]&&u.ops.pop(),u.trys.pop();continue}o=r.call(e,u)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var a=(e=o(function(e,r,n){var s,o;return u(this,function(u){switch(u.label){case 0:return[4,e.getLocalStorage(t.PROVIDER_COOKIE_NAME+r,"selectedAddress")];case 1:if(!(s=u.sent())||!(null==s?void 0:s.length))return[2,void 0];return[4,e.getLocalStorage(r,"user_id")];case 2:return o=u.sent(),[2,null==s?void 0:s.find(function(e){return e.network===n&&e.userId===o})]}})}),function(r,t,n){return e.apply(this,arguments)}),i=(r=o(function(e,r,s,o){var a,i,c;return u(this,function(u){switch(u.label){case 0:return[4,e.getLocalStorage(t.PROVIDER_COOKIE_NAME+r,"selectedAddress")];case 1:return a=u.sent(),[4,e.getLocalStorage(r,"user_id")];case 2:if(i=u.sent(),!(!a||!(null==a?void 0:a.length)))return[3,4];return[4,e.setLocalStorage(t.PROVIDER_COOKIE_NAME+r,"selectedAddress",[{userId:i,network:s,address:(0,n.getAddress)(s,o)}])];case 3:case 5:return u.sent(),[2];case 4:return -1!==(c=null==a?void 0:a.findIndex(function(e){return e.network===s&&e.userId===i}))?a[c].address=(0,n.getAddress)(s,o):a.push({userId:i,network:s,address:(0,n.getAddress)(s,o)}),[4,e.setLocalStorage(t.PROVIDER_COOKIE_NAME+r,"selectedAddress",a)]}})}),function(e,t,n,s){return r.apply(this,arguments)});