import{ethErrors as r}from"eth-rpc-errors";import{signTransactionParameterChecker as e,parsingSolanaTransaction as a}from"../utils/paramChecker.js";import{getSelectedAddress as i}from"../utils/selectedAddress.js";import{getAddress as n}from"../utils/utils.js";import{sendTransaction as o}from"./sendTransaction.js";export var solanaSendTransaction=function(s){var t=s.wepinProvider,d=s.network;return function(s,p,u,m){if(!t._isInitialized){m(r.provider.unauthorized());return}var l,v=!1;Object.keys(s.params).includes("message")||(m(r.rpc.invalidParams()),v=!0);var c=a(Object.values(s.params)[0]);void 0===c.value?c.data="0x"+Object.values(s.params)[0]:e(c)||(m(r.rpc.invalidParams()),v=!0);var f=null!==(l=c.from)&&void 0!==l?l:"";i(t.wepinStorage,t.wepinAppId,d).then(function(e){if((null==e?void 0:e.address)!==n(d,f)){m(r.provider.unauthorized());return}v||(s.params=[c],o({wepinProvider:t,network:d})(s,p,u,m))})}};