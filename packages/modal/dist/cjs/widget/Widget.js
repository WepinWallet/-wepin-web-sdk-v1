"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Widget",{enumerable:!0,get:function(){return c}});var e=require("@wepin/common");function t(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(c){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,c);var u,s,a,l=(u=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=o(f);return e=u?Reflect.construct(n,arguments,o(this).constructor):n.apply(this,arguments),e&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:t(this)});function f(n,o,i,c,u){var s;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f),r(t(s=l.call(this)),"id",void 0),r(t(s),"url",void 0),r(t(s),"type",void 0),r(t(s),"isHide",void 0),r(t(s),"isWidgetReady",!1),r(t(s),"EL",void 0),r(t(s),"_open",void 0),s.url=n,s.id="id-".concat((0,e.uuidv4)()),s.isHide=u,u||f.openOverlay(s.id),f._webview[s.id]=o,s.type=i,s.EL=c,window.addEventListener("message",s.EL),s._open=!0,s}return s=[{key:"isOpen",get:function(){return this._open}},{key:"close",value:function(){this.isHide||f.closeOverlay(this.id),window.removeEventListener("message",this.EL),this._open=!1,this.isWidgetReady=!1,this._closeWebview()}},{key:"response",value:function(e){try{this._post(e)}catch(e){console.error("Can not response message to the webview",e)}}},{key:"request",value:function(e){try{this._post(e)}catch(e){console.error("Can not send message to the webview",e)}}}],a=[{key:"getWebview",value:function(e){return f._webview[e]}},{key:"clearWebview",value:function(e){delete f._webview[e]}},{key:"clearAllWebview",value:function(){this._webview={}}}],s&&n(f.prototype,s),a&&n(f,a),f}(require("../widget/overlay/Overlay.js").Overlay);r(c,"_webview",{});