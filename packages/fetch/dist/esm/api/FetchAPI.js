function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t,e,r,n,o,a,i){try{var u=t[a](i),l=u.value}catch(t){r(t);return}u.done?e(l):Promise.resolve(l).then(n,o)}function r(t,e,o){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(r||t):a.value}})(t,e,o||t)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,n,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],i=!0,u=!1;try{for(o=o.call(t);!(i=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){u=!0,n=t}finally{try{i||null==o.return||o.return()}finally{if(u)throw n}}return a}}(t,e)||u(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||u(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}import c from"eventemitter2";import f from"./APIResponse.js";var s=/*#__PURE__*/function(t){var u;function c(t){var e,r,o,a,i,u;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),r=n(r=c),e=(u=l()?Reflect.construct(r,[],n(this).constructor):r.apply(this,o))&&("object"==(u&&"undefined"!=typeof Symbol&&u.constructor===Symbol?"symbol":typeof u)||"function"==typeof u)?u:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this),i=void 0,(a="baseUrl")in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,e.baseUrl=t,e}return!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(c,t),u=[{key:"send",value:function(t,r){var n,o=this;return(n=function(){var e,r,n,i,u,l,c,s,y,p,h,b;return function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,function(d){switch(d.label){case 0:var v;return e=t.url,r=t.query,n=t.method,i=t.data,u=t.headers,c=(l=a((null!=(v=FormData)&&"undefined"!=typeof Symbol&&v[Symbol.hasInstance]?!!v[Symbol.hasInstance](i):i instanceof v)?[i,{}]:["string"!=typeof i?JSON.stringify(i):i,{"Content-Type":"application/json"}],2))[0],s=l[1],y=o.baseUrl+e,[4,fetch(o.getUrlWithParams(y,r),{method:n,headers:Object.assign(u||{},s),body:c,credentials:t.withCredentials?"include":"same-origin"})];case 1:return[4,(p=d.sent()).json()];case 2:return h=d.sent(),b=o.convertHeadersToPlainObject(p.headers),[2,new f({data:h,status:p.status,headers:b,request:t})]}})},function(){var t=this,r=arguments;return new Promise(function(o,a){var i=n.apply(t,r);function u(t){e(i,o,a,u,l,"next",t)}function l(t){e(i,o,a,u,l,"throw",t)}u(void 0)})})()}},{key:"getUrlWithParams",value:function(t,e){if(!e)return t;var r=new URL(t);return Object.entries(e).forEach(function(t){var e=a(t,2),n=e[0],o=e[1];r.searchParams.append(n,o)}),r.toString()}},{key:"convertHeadersToPlainObject",value:function(t){var e={},r=!0,n=!1,o=void 0;try{for(var a,i=Object.keys(t)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var u=a.value;e[u]=t.get(u)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"addListener",value:function(t,e){return r(n(c.prototype),"addListener",this).call(this,t,e)}},{key:"on",value:function(t,e,o){return r(n(c.prototype),"on",this).call(this,t,e,o)}},{key:"prependListener",value:function(t,e,o){return r(n(c.prototype),"prependListener",this).call(this,t,e,o)}},{key:"once",value:function(t,e,o){return r(n(c.prototype),"once",this).call(this,t,e,o)}},{key:"emit",value:function(t){for(var e,o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return(e=r(n(c.prototype),"emit",this)).call.apply(e,[this,t].concat(i(a)))}},{key:"emitAsync",value:function(t){for(var e,o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return(e=r(n(c.prototype),"emitAsync",this)).call.apply(e,[this,t].concat(i(a)))}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(c.prototype,u),c}(c);export default s;