"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Widget",{enumerable:!0,get:function(){return u}});var e=require("@wepin/common");function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}var u=/*#__PURE__*/function(u){"use strict";var c,s;function a(t,r,u,c,s){var l,f,v,p;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),f=o(f=a),n(l=(p=i()?Reflect.construct(f,[],o(this).constructor):f.apply(this,v))&&("object"==(p&&"undefined"!=typeof Symbol&&p.constructor===Symbol?"symbol":typeof p)||"function"==typeof p)?p:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this),"id",void 0),n(l,"url",void 0),n(l,"type",void 0),n(l,"isHide",void 0),n(l,"isWidgetReady",!1),n(l,"EL",void 0),n(l,"_open",void 0),l.url=t,l.id="id-".concat((0,e.uuidv4)()),l.isHide=s,s||a.openOverlay(l.id),a._webview[l.id]=r,l.type=u,l.EL=c,window.addEventListener("message",l.EL),l._open=!0,l}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(a,u),c=[{key:"isOpen",get:function(){return this._open}},{key:"close",value:function(){this.isHide||a.closeOverlay(this.id),window.removeEventListener("message",this.EL),this._open=!1,this.isWidgetReady=!1,this._closeWebview()}},{key:"response",value:function(e){try{this._post(e)}catch(e){console.error("Can not response message to the webview",e)}}},{key:"request",value:function(e){try{this._post(e)}catch(e){console.error("Can not send message to the webview",e)}}}],s=[{key:"getWebview",value:function(e){return a._webview[e]}},{key:"clearWebview",value:function(e){delete a._webview[e]}},{key:"clearAllWebview",value:function(){this._webview={}}}],c&&t(a.prototype,c),s&&t(a,s),a}(require("../widget/overlay/Overlay.js").Overlay);n(u,"_webview",{});