function e(e,r,t,n,o,i,c){try{var a=e[i](c),u=a.value}catch(e){t(e);return}a.done?r(u):Promise.resolve(u).then(n,o)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t(e,r){return(t=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}import{createFetchMiddleware as n}from"eth-json-rpc-middleware";import{BaseProvider as o}from"../BaseProvider";import i from"../const/gatewayUrl";import{createWepinMiddleware as c}from"../middlewares/eth-json-rpc-wepin";import{getNetworkInfoByName as a}from"../utils/info";var u=function(o){!function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}(s,o);var u,l,f=(u=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=r(s);return e=u?Reflect.construct(t,arguments,r(this).constructor):t.apply(this,arguments),e&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function s(e){var r,t=e.network,o=e.rpcUrl,a=e.chainId,u=e.wepinProvider;!function(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}(this,s);var l=[],p=c({wepinProvider:u,network:t});return l.push(p),o.forEach(function(e){var r=e.url;"internal"===e.type&&(r=i.Gateway+e.url),l.push(n({rpcUrl:r}))}),(r=f.call(this,{rpcMiddleware:l}))._initializeState({accounts:[],chainId:a}),r}return l=[{key:"generate",value:function(r){var t;return(t=function(){var e,t,n,o,i;return function(e,r){var t,n,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw TypeError("Generator is already executing.");for(;c;)try{if(t=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=r.call(e,c)}catch(e){i=[6,e],n=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(c){switch(c.label){case 0:return[4,a(r.network)];case 1:return n=(t=c.sent()).rpcUrl,o=t.chainId,i=new s({network:r.network,rpcUrl:n,chainId:o,wepinProvider:r.wepinProvider}),window.evmproviders=window.evmproviders||{},window.evmproviders[i.name]=i,window.evmproviders[i.name].selectedAddress=null===(e=r.address)||void 0===e?void 0:e.toLowerCase(),[2,i]}})},function(){var r=this,n=arguments;return new Promise(function(o,i){var c=t.apply(r,n);function a(r){e(c,o,i,a,u,"next",r)}function u(r){e(c,o,i,a,u,"throw",r)}a(void 0)})})()}}],function(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(s,l),s}(o);export{u as default};