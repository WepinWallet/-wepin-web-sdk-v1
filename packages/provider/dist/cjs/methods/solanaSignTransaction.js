"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"solanaSignTransaction",{enumerable:!0,get:function(){return n}});var r=require("eth-rpc-errors"),e=require("../utils/paramChecker.js"),a=require("../utils/selectedAddress.js"),i=require("../utils/utils.js"),s=require("./signTransaction.js"),n=function(n){var t=n.wepinProvider,o=n.network;return function(n,u,d,c){if(!t._isInitialized){c(r.ethErrors.provider.unauthorized());return}var l,p=!1;Object.keys(n.params).includes("message")||(c(r.ethErrors.rpc.invalidParams()),p=!0);var v=(0,e.parsingSolanaTransaction)(Object.values(n.params)[0]);void 0===v.value?v.data="0x"+Object.values(n.params)[0]:(0,e.signTransactionParameterChecker)(v)||(c(r.ethErrors.rpc.invalidParams()),p=!0);var m=null!==(l=v.from)&&void 0!==l?l:"";(0,a.getSelectedAddress)(t.wepinStorage,t.wepinAppId,o).then(function(e){if((null==e?void 0:e.address)!==(0,i.getAddress)(o,m)){c(r.ethErrors.provider.unauthorized());return}p||(n.params=[v],(0,s.signTransaction)({wepinProvider:t,network:o})(n,u,d,c))})}};