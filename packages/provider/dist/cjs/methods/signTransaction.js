"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"signTransaction",{enumerable:!0,get:function(){return s}});var e=require("eth-rpc-errors"),r=require("../const/kaiaTxType.js"),t=require("../utils/paramChecker.js"),n=require("../utils/requestFactory.js"),a=require("../utils/selectedAddress.js"),i=require("../utils/utils.js"),s=function(s){var o=s.wepinProvider,u=s.network;return function(s,c,p,d){if(!o._isInitialized){d(e.ethErrors.provider.unauthorized());return}var l=!1,f=Array.isArray(s.params)?s.params[0]:s.params;if((0,t.signTransactionParameterChecker)(f)||(d(e.ethErrors.rpc.invalidParams()),l=!0),u.startsWith("klaytn")&&f.typeInt&&!r.kaiaBaseTxType.includes(f.typeInt)&&!r.kaiaFeeDelegatedTxType.includes(f.typeInt)){d(e.ethErrors.rpc.methodNotSupported());return}var y=s.params[0].from;(0,a.getSelectedAddress)(o.wepinStorage,o.wepinAppId,u).then(function(r){if((null==r?void 0:r.address)!==(0,i.getAddress)(u,y)){d(e.ethErrors.provider.unauthorized());return}if(!l){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}({account:{address:s.params[0].from,network:u}},s.params[0]);(0,n.requestFactory)({wepinProvider:o,network:u,req:s,res:c,next:p,end:d,command:"sign_transaction",parameter:t})}})}};