"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"signTransaction",{enumerable:!0,get:function(){return i}});var r=require("eth-rpc-errors"),e=require("../utils/paramChecker.js"),t=require("../utils/requestFactory.js"),n=require("../utils/selectedAddress.js"),a=require("../utils/utils.js"),i=function(i){var s=i.wepinProvider,o=i.network;return function(i,u,c,d){if(!s._isInitialized){d(r.ethErrors.provider.unauthorized());return}var p=!1,l=Array.isArray(i.params)?i.params[0]:i.params;(0,e.signTransactionParameterChecker)(l)||(d(r.ethErrors.rpc.invalidParams()),p=!0);var f=i.params[0].from;(0,n.getSelectedAddress)(s.wepinStorage,s.wepinAppId,o).then(function(e){if((null==e?void 0:e.address)!==(0,a.getAddress)(o,f)){d(r.ethErrors.provider.unauthorized());return}if(!p){var n=function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(e){var n;n=t[e],e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n})}return r}({account:{address:i.params[0].from,network:o}},i.params[0]);(0,t.requestFactory)({wepinProvider:s,network:o,req:i,res:u,next:c,end:d,command:"sign_transaction",parameter:n})}})}};