function r(r,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](r):r instanceof t}import{Message as t,SystemProgram as e,Transaction as a,VersionedMessage as n,VersionedTransaction as o}from"@solana/web3.js";var u=function(r){r.startsWith("0x")&&(r=r.slice(2));var e=Buffer.from(r,"hex");try{var u=n.deserialize(e);return new o(u)}catch(r){var i=t.from(e);return a.populate(i)}},i=function(t){if(r(t,Buffer))return"0x"+t.readIntLE(4,8).toString(16);if(r(t,Uint8Array))return"0x"+Buffer.from(t).readIntLE(4,8).toString(16);throw Error("Unsupported data type")};export var parsingSolanaTransaction=function(t){var a,n,s,f=u(t),c="";if(r(f,o)){var d=f.message;a=d.staticAccountKeys,n=d.compiledInstructions.map(function(r){return{programId:a[r.programIdIndex],keys:r.accountKeyIndexes.map(function(r){return a[r]}),data:r.data}}),c=a[0].toBase58()}else a=(n=f.instructions.map(function(r){return{programId:r.programId,keys:r.keys.map(function(r){return r.pubkey}),data:r.data}})).map(function(r){return r.keys}).flat(),c=(null===(s=f.feePayer)||void 0===s?void 0:s.toBase58())||"";if(0===n.length)throw Error("No instructions found");if(n.length>1)return{from:c};if(n[0].programId.equals(e.programId)&&n[0].data.length>=9&&2===n[0].data[0])try{return{from:c,to:n[0].keys[1].toBase58(),value:i(n[0].data)}}catch(r){throw r}return{from:c,to:n[0].keys[1].toBase58()}};export var decodeTransaction=function(t,e){try{e.startsWith("0x")&&(e=e.slice(2));var a=Buffer.from(e,"hex");return o.deserialize(a)}catch(a){var n=u(t);try{if(r(n,o)){var i=n.message.staticAccountKeys;0!==n.signatures.length&&n.signatures.find(function(r){return r.toString().replace(",","")===e})||n.addSignature(i[0],Buffer.from(e,"hex"))}else n.addSignature(n.feePayer,Buffer.from(e,"hex"));return n}catch(r){throw r}}};