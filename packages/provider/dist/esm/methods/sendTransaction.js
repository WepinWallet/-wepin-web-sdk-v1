import{ethErrors as r}from"eth-rpc-errors";import{kaiaBaseTxType as e}from"../const/kaiaTxType.js";import{signTransactionParameterChecker as t}from"../utils/paramChecker.js";import{requestFactory as n}from"../utils/requestFactory.js";import{getSelectedAddress as o}from"../utils/selectedAddress.js";import{getAddress as a}from"../utils/utils.js";export var sendTransaction=function(i){var s=i.wepinProvider,p=i.network;return function(i,u,c,m){if(!s._isInitialized){m(r.provider.unauthorized());return}var d=!1,f=Array.isArray(i.params)?i.params[0]:i.params;if(t(f)||(m(r.rpc.invalidParams()),d=!0),p.startsWith("klaytn")&&f.typeInt&&!e.includes(f.typeInt)){m(r.rpc.methodNotSupported());return}var l=i.params[0].from;o(s.wepinStorage,s.wepinAppId,p).then(function(e){if((null==e?void 0:e.address)!==a(p,l)){m(r.provider.unauthorized());return}d||n({wepinProvider:s,network:p,req:i,res:u,next:c,end:m,command:"send_transaction",parameter:function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(e){var n;n=t[e],e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n})}return r}({account:{address:l,network:p}},i.params[0])})})}};